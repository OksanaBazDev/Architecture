### <a name="_b7urdng99y53"></a>**Название задачи: Передача ставок в кол-центр** 
### <a name="_hjk0fkfyohdk"></a>**Автор:Базарова О.Ю.**
### <a name="_uanumrh8zrui"></a>**Дата:27.03**
### <a name="_3bfxc9a45514"></a>**Функциональные требования**

|**№**|**Действующие лица или системы**|**Use Case**|**Описание**|
| :-: | :- | :- | :- |
|1|Менеджер бэк-офиса, АБС, система кол-центра |Предоставление доступа к ставкам по депозитам в систему кол-центра|1.Менеждер формирует новые ставки по депозитам 2.Ставки передаются в систему кол-центра 
|2|Менеджер бэк-офиса, АБС, система партерского кол-центра |Предоставление доступа к ставкам по депозитам в систему партнерского кол-центра |1.Менеждер формирует новые ставки по депозитам 2.Ставки передаются в систему партнерского кол-центра. 
|3|Оператор, клиент, система кол-центра, система партнерского кол-центра |Консультация оператора по ставкам по депозитам |1.Клиент звонит в кол-центр. 2.Оператор смотрит актуальные ставки по депозитам 3.Оператор консультирует клиента |

### <a name="_u8xz25hbrgql"></a>**Нефункциональные и архитектурно-значимые требования**

|**№**|**Требование**|
| :-: | :- |
|1|Система кол-центра с высокой долей вероятности может быть перегружена |
|2|Требуется подключение к работе партнерского кол-центра|
|3|Партнерский кол-центр может получать актуальные ставки по депозитам только в виде файлов |
|4|Передачу файлов в партнерский кол-центр необходимо реализовать через протокол SFTP|
|5|Система кол-центра должна хранить у себя информацию об актуальных ставках по депозитам |

### <a name="_qmphm5d6rvi3"></a>**Решение**
Приведите диаграммы контекста и контейнеров в модели C4. Опишите там основные компоненты и интеграции всех элементов решения. 

Также опишите, какой логикой вы руководствовались в ходе принятия решений и выбора технологий. Не забывайте, что необходимо учесть все функциональные и нефункциональные требования.

Система кол-центра:
	Данная система развернута в инфраструктуре банка и полностью подерживается подрядчиком, дополнительно в команде АБС есть несколько специалистов,
которые имеют возможность для доработки системы кол-центра самостоятельно. Воспользуемся этой возможностью и внесем изменения в систему кол-центра. 
Передачу ставок от АБС в систему кол-центра будем реализовывать через очередь Kafka. Сервис АБС по работе с депозитами будет записывать актуальные данные 
по ставкам на депозиты, а система кол-центра будет считывать эти данные из топика и сохранять их. Тем самым будет поддерживаться актуальная информация по ставкам 
в системе кол-центра.  В случае перегрузки системы кол-центра , звонки будут перенаправляться в партнерский кол-центр.   
	Для минимизации задержек в обслуживании клиентов можно использовать механизмы кэширования. 
Например, данные о ставках можно кэшировать на стороне кол-центра, 
обновляя кэш по расписанию или по событиям, что позволит сократить время ожидания при обработке запросов.

Система партнерского кол-центра:
 Данная система не имеет возможности интреграции через API-вызовы, есть только вариант передачи файлов через SFTP протокол, поэтому необходимо реализовать в АБС 
 функционал по формированию и передаче файлов с информацией об актуальных ставках по депозитам через протокол SFTP.   
 
Не менее важным является процесс тестирования нового решения. Необходимо проводить функциональное и нагрузочное тестирование, 
а также тестирование на устойчивость системы кол-центра в условиях пиковых нагрузок.

### <a name="_bjrr7veeh80c"></a>**Альтернативы**
1)  Альтернативное решение для системы кол-центра может быть использованием RESTful API вместо очереди Kafka. 
Это решение позволяет создавать более простую и понятную архитектуру, минимизируя время на разработку и устранение потенциальных проблем, 
связанных с настройкой и поддержкой потокового обмена данными. Но такое решение сопровождается определёнными недостатками: 
одной из ключевых проблем может стать производительность системы. С RESTful API каждое обращение к серверу 
требует создания нового соединения, что может вызвать дополнительные задержки, особенно при высоких объемах запросов. 
Это может привести к увеличению времени отклика, особенно в условиях пиковых нагрузок.

2) Вместо использования асинхронной очереди сообщений, можно также рассмотреть возможность применения технологии WebSocket 
для динамической передачи уведомлений о изменениях в ставках на депозиты. Это обеспечит более быстрое обновление данных на стороне кол-центра, 
что поможет в улучшении обслуживания клиентов. Однако у использования WebSocket есть и свои недостатки. Одной из главных проблем является 
сложность реализации. WebSocket требует дополнительной настройки и управления, особенно в аспектах обработки соединений, ошибок и отключений. 
Это может потребовать больше времени на разработку и тестирование. Ещё одним недостатком является зависимость от сети и управление состоянием соединения. 
Если соединение прерывается или если интернет-соединение нестабильное, это может вызвать проблемы с доставкой уведомлений. А это вызовит недовольство клиентов! 
Кроме того, необходимо учитывать ресурсы сервера и нагрузку, так как тысячи одновременных подключений могут быстро исчерпать ресурсы, что потребует 
дополнительных усилий для масштабирования сервера. Безопасность также является важной проблемой при использовании WebSocket. Поскольку соединение открыто, 
необходимо реализовывать механизмы аутентификации и авторизации, чтобы предотвратить несанкционированный доступ и атаки.

**Недостатки, ограничения, риски**

Одним из основных недостатков является сложность настройки и управления Kafka. Поскольку Kafka является распределенной системой, требует значительных усилий 
для установки и конфигурации. Для разработчиков и администраторов может потребоваться значительная подготовка и опыт, что увеличивает затраты на обучение и сопровождение.

Проблемы с производительностью могут возникнуть при неправильной конфигурации. Kafka может справляться с огромным количеством данных и пользователей, 
однако при недостаточной оптимизации настроек, таких как размеры партиций и количество реплик, можно столкнуться с задержками и потерей производительности. 
Кроме того, если поток данных превышает возможности обработки, это может привести к замедлению работы всей системы и увеличению времени ожидания.

Существуют и риски, связанные с охраной данных. Хотя Kafka предлагает встроенные механизмы безопасности, такие как шифрование и аутентификация, 
на практике их реализация может быть сложной. Неправильные настройки безопасности могут привести к уязвимостям и несанкционированному доступу к данным. 

Согласованность данных также является проблемой. В отличие от традиционных реляционных баз данных, Kafka использует модель "событие-доминирующая система", 
что может привести к проблемам с гарантией доставки сообщений (например, при сбоях) и повторной обработкой событий. 

